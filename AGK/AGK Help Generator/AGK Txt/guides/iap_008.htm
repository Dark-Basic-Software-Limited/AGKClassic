<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Saving and restoring purchases - AGK Help</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="../main.js"></script>
<link href="../main.css" rel="styleSheet" type="text/css" />
<link href="../prettify.css" rel="styleSheet" type="text/css" />
<script type="text/javascript" src="../prettify.js"></script>
<script type="text/javascript" src="../lang-agk.js"></script>
<link rel="stylesheet" href="../lightbox/css/lightbox.min.css">
<script src="../lightbox/js/lightbox-plus-jquery.min.js"></script>
<script src="../clipboard/clipboard.min.js"></script>
</head>
<body>
<script>var clipboard = new Clipboard('.btn');
clipboard.on('success', function(e)
{
console.log(e);
});
clipboard.on('error', function(e)
{
console.log(e);
});
</script>
<div class="header" style="background: #000 url('../gfx/header-back.png') top center no-repeat;"><div><div class="navigation"><a href="../home.html"><img src="../gfx/b-home.png" width="76" height="44" alt=""></a><a href="javascript:history.go(-1)"><img src="../gfx/b-back.png" width="71" height="44" alt=""></a><a href="javascript:window.print()"><img src="../gfx/b-print.png" width="75" height="44" alt=""></a><a style="cursor:pointer;" onclick="ToggleCPP()"><img src="../gfx/lang-c.png" width="253" height="44" alt=""  id="basicCodeBlock0" border="0"></a><a style="cursor:pointer;" onclick="ToggleCPP()"><img src="../gfx/lang-basic.png" width="253" height="44" alt=""  id="cppCodeBlock0" style="display:none" border="0"></a></div><a href="http://www.appgamekit.com" target="_blank"><img class="logo" src="../gfx/agk-logo.png" height="44" style="margin:15px 0" alt="App Game Kit" border="0"></a></div><img src="../gfx/drop-shadow.png" width="1158" height="40" alt=""></div><div class="breadcrumbs">
<a href="../home.html">Home</a> &gt; <a href="../guides.html">Guides</a> &gt; Saving and restoring purchases</div><div class="page"><h1>Saving and restoring purchases</h1><p>When dealing with consumable items it is your responsibility to save any data relating to them. For example, let's imagine you create an app with 10 mini games. You may initially want to let the user play 2 of those mini games. To access the other 8 mini games the user will need to purchase keys. You give the user an option to buy a key as a consumable item. If the user purchases a key they can unlock any of the locked mini games. Given this scenario you would need to store how many keys the user has purchased and whether they have used them to unlock any of the mini games. If they unlock a mini game then that particular key gets used up. To unlock any of the remaining mini games they either use some remaining keys or purchase new ones.</p><p>Consumable items are used after purchase. A user cannot get these items back if they uninstall your app or install the app onto another device. </p><p>Non-consumable items give you permanent access to something. For example, you may release a game that lets the user play the first 10 levels for free. If they want to access the remaining levels they can be unlocked through a non-consumable in app purchase. If the user uninstalls this app or moves it to another device they will still own the item.</p><p>On Android and Amazon platforms a call to <i>InAppPurchaseSetup</i> will automatically restore non-consumable items. </p><p>On iOS if a user purchased a non-consumable item then reinstalled the app then <i>GetInAppPurchaseAvailable</i> would return 0 for items unless it was purchased again. The user can still go through the purchase process without being charged, however, Apple has a requirement where you must display a button that allows users to restore purchases of non-consumable items. If this button is pressed any previous purchases will be restored without the user needing to run through the process of a full purchase. To handle this on iOS simply call <i>InAppPurchaseRestore</i>.</p><div align="center"><a href="iap_007.htm"><img src="../gfx/prev.png"  alt=""></a> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<a href="iap_009.htm"><img src="../gfx/next.png"  alt=""></a></div><br><br></div><div class="footer" style="background: #000 url('../gfx/footer-back.png') top center no-repeat;"><div><p><a href="http://www.thegamecreators.com" target="_blank" style="float:none"><img style="float:right;margin-top:2px" src="../gfx/tgc-logo.png" width="188" height="27" alt="" border="0"></a><br><strong>App Game Kit</strong> &nbsp;&copy; The Game Creators Ltd. All Rights Reserved.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="mailto:agkreports@thegamecreators.com" style="float:none"><font color="FFFFFF">Report an issue</font></a></p></p></div></div><script type="text/javascript">prettyPrint(true);</script></body></html>